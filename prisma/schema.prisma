generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                   String             @id @default(cuid())
  clerkUserId          String
  firstname            String
  lastname             String
  email                String             @unique
  contactNumber        String?
  address              String?
  profileImage         String?
  height               String?
  weight               String?
  userType             USEROLE?
  gender               GENDER?
  contact              String?
  birthdate            DateTime?
  createdAt            DateTime         @default(now())
  updatedAt            DateTime         @updatedAt

  patientHistory       PatientHistory[]  @relation("UserPatientHistory")

  @@index([firstname])
}

enum USEROLE {
  DOCTOR
  ADMIN
  PATIENT
}

enum GENDER {
  MALE
  FEMALE
  OTHER
}

model PatientHistory {
  id                   String             @id @default(cuid())
  userId               String
  history              String
  createdAt            DateTime           @default(now())

  user                 User               @relation("UserPatientHistory", fields: [userId], references: [id])

  @@index([userId])
}

